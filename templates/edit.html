<!doctype html>
<html lang="ja">
  <head>
    <meta charset="utf-8">
    <title>タスク編集</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CDN -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
    >
  </head>

  <body class="bg-light">
    <div class="container py-4">
      <h1 class="mb-4">タスク編集</h1>

      <form action="{{ url_for('update', task_id=task.ID) }}" method="post">
        <!-- タイトル -->
        <div class="mb-2">
          <label class="form-label">タイトル</label>
          <input
            class="form-control"
            name="title"
            value="{{ task.Title }}"
            required
          >
        </div>

        <!-- 内容 -->
        <div class="mb-2">
          <label class="form-label">内容</label>
          <textarea
            class="form-control"
            name="content"
            rows="4"
          >{{ task.Content }}</textarea>
        </div>

        <!-- 期日 -->
        <div class="mb-2">
          <label class="form-label">期日（日時）</label>
          <input
            class="form-control"
            type="datetime-local"
            name="duedate"
            value="{{ task.DueDate if 'T' in task.DueDate else task.DueDate.replace(' ', 'T') }}"
            required
          >
        </div>

        <!-- ★ 追加：カテゴリ -->
        <div class="mb-2">
          <label class="form-label">カテゴリ</label>
          <select class="form-select" name="category">
            <option value="">未分類</option>
            <option value="仕事" {% if task.Category == "仕事" %}selected{% endif %}>仕事</option>
            <option value="家庭" {% if task.Category == "家庭" %}selected{% endif %}>家庭</option>
            <option value="学習" {% if task.Category == "学習" %}selected{% endif %}>学習</option>
          </select>
        </div>

        <!-- ★ 追加：優先度 -->
        <div class="mb-3">
          <label class="form-label">優先度</label>
          <select class="form-select" name="priority">
            <option value="高" {% if task.Priority == "高" %}selected{% endif %}>高</option>
            <option value="中" {% if task.Priority == "中" %}selected{% endif %}>中</option>
            <option value="低" {% if task.Priority == "低" %}selected{% endif %}>低</option>
          </select>
        </div>

        <button class="btn btn-primary" type="submit">
          保存
        </button>
        <a class="btn btn-secondary" href="{{ url_for('index') }}">
          キャンセル
        </a>
      </form>

    </div>
  </body>
</html>
